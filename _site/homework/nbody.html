<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140907291-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-140907291-3');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIS 110 Fall 2020 — Introduction to Computer Programming</title>

  <!-- Mathjax -->
  <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
  <script type="text/javascript" charset="utf-8"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  <script type="text/javascript" charset="utf-8" src="https://vincenttam.github.io/javascripts/MathJaxLocal.js">
  </script>

  <link rel="apple-touch-icon" sizes="180x180" href="/~cis110/current/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/~cis110/current/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/~cis110/current/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/~cis110/current/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="/~cis110/current/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/~cis110/current/assets/favicon/favicon.ico">
  <meta name="apple-mobile-web-app-title" content="CIS 110">
  <meta name="application-name" content="CIS 110">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-config" content="/~cis110/current/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- CSS -->
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

  <link href="/~cis110/current/assets/css/style.css" rel="stylesheet">
  <link href="/~cis110/current/assets/css/syntax.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <a class="sr-only" href="#content">Skip to main content</a>

  <!-- Docs master nav -->
  <header class="navbar navbar-static-top navbar-default" role="banner">
    <div class="container">
      <div class="row">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <ul class="nav navbar-nav">
            <div class="hidden-sm hidden-xs">
              <li id="main-page"><a href="/~cis110/current/index.html" class="navbar-brand">CIS 110 - Introduction to
                  Computer Programming</a></li>
            </div>
            <div class="visible-sm visible-xs">
              <li id="main-page"><a href="/~cis110/current/index.html" class="navbar-brand">CIS 110</a></li>
            </div>
          </ul>
        </div>
        <!-- DO NOT edit this file directly. If you are editing the header, edit navigation.yaml or homework.yaml. -->
<nav class="collapse navbar-collapse" role="navigation">
    <ul class="nav navbar-nav">
        <li id="Homework">
    <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/homework.html">Homework
    <span class="caret"></span></a>
    <ol class="dropdown-menu">
        <li>
            <a href="/~cis110/current/homework/homework.html">Homework Table</a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </ol>
</li>
        
        
        
        <li id="Syllabus"><a href="/~cis110/current/syllabus.html">Syllabus</a></li>
        
        
        
        <li id="Staff"><a href="/~cis110/current/staff.html">Staff</a></li>
        
        
        
        <li id="Office Hours"><a href="/~cis110/current/schedule.html">Office Hours</a></li>
        
        
        
        <li id="Grade Calculator"><a href="/~cis110/current/grade_calc.html">Grade Calculator</a></li>
        
        
        
        <li id="SRS"><a href="/~cis110/current/sunday_review_sessions.html">SRS</a></li>
        
        
        
        <li id="Policies">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Policies
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/policies/grading_policies.html">Grading</a></li>
                
                <li><a href="/~cis110/current/policies/attendance_fa20.html">Attendance</a></li>
                
                <li><a href="/~cis110/current/policies/homework_policies.html">Homework</a></li>
                
                <li><a href="/~cis110/current/policies/collaboration_policies.html">Collaboration</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Exams">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Exams
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/exams/exam_procedures.html">Exam Procedures</a></li>
                
                <li><a href="/~cis110/current/exams/exam1.html">Exam 1</a></li>
                
                <li><a href="/~cis110/current/exams/exam2.html">Exam 2</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Resources">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Resources
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/resources/getting_help.html">Getting Help</a></li>
                
                <li><a href="/~cis110/current/resources/javadocs.html">CIS 110 Javadocs</a></li>
                
                <li><a href="/~cis110/current/resources/topics_guide.html">Topic Glossary</a></li>
                
                <li><a href="/~cis110/current/resources/runtime_errors.html">Runtime Errors Walkthrough</a></li>
                
                <li><a href="/~cis110/current/resources/compiler_errors.html">Compilation Errors Walkthrough</a></li>
                
                <li><a href="/~cis110/current/resources/style.html">Style Guide</a></li>
                
                <li><a href="/~cis110/current/resources/penndraw.html">PennDraw.java</a></li>
                
                <li><a href="/~cis110/current/resources/in.html">In.java</a></li>
                
                <li><a href="/~cis110/current/resources/accommodations.html">Accommodations</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Wellness"><a href="/~cis110/current/wellness.html">Wellness</a></li>
        
        
    </ul>
</nav>
      </div>
    </div>
  </header>

  <div class="container">
    
    <h1 id="nbody">NBody</h1>
<h2 id="0-getting-started">0. Getting started</h2>

<h3 id="a-goals">A. Goals</h3>

<p>The goal of the NBody assignment is to familiarize you with arrays, iteration, graphics, and Java command-line arguments. The specific goals are to:</p>

<ul>
  <li>Learn about a scientific computing application</li>
  <li>Learn to build up complex results using a sequence of simple statements</li>
  <li>Reinforce understanding of animations</li>
  <li>Use nested loops</li>
  <li>Use arrays</li>
  <li>Use Java command-line arguments</li>
</ul>

<p>At the end of this assignment, you will have produced a visual simulation of the gravitational interactions among particles in two dimensions.</p>

<h3 id="b-background">B. Background</h3>

<p>In 1687, in his famous <em>Principia</em>, Sir Isaac Newton formulated the principles governing the motion of two particles under the influence of their mutual gravitational attraction. However, Newton was unable to solve the problem for three particles. Indeed, in general, systems of three or more particles can only be solved numerically. An N-body simulation approximates the motion of particles which interact with one another via physical forces (like gravitational force). This type of simulation is widely used in astrophysics to predict how certain systems of particles (like planets in a solar system) interact with one another.</p>

<p>Your challenge in this assignment is to write a program to simulate the motion of a designated number of particles in a plane that are mutually affected by gravitational forces, and animate the results. Similar implementations are widely used in astronomy, semiconductors, and fluid dynamics to study complex physical systems. Scientists also apply the same techniques to other pairwise interactions including Coulombic, Biot-Savart, and van der Waals.</p>

<p>We provide all the formulas you need in the assignment. Don’t worry if you don’t fully understand the mathematics behind them – this is neither a physics nor a math course. <strong>Instead, focus on the computer science task: building up a complicated result through a series of simple statements.</strong></p>

<h3 id="c-your-program">C. Your program</h3>

<p>We are going to use Newton’s universal law of gravitation and Java to simulate the manner in which celestial bodies (particles) interact. Since we are most familiar with the solar system, our primary goal is to create a simulation showing the planets (Mercury through Mars) orbiting around the Sun. Here’s what your end result will look like.</p>

<p><a href="https://www.youtube.com/watch?time_continue=1&amp;v=pj2ZaOimGvc&amp;feature=emb_logo" title="end_result.png"><img src="http://img.youtube.com/vi/pj2ZaOimGvc/0.jpg" alt="" /></a></p>

<p>Each body (planet) in the simulation has three characteristics that define its movement: its position, its velocity (the speed and direction of movement), and its acceleration (the direction and rate of change of the body’s velocity).</p>

<h3 id="d-getting-started">D. Getting started</h3>

<p><strong>CIS 110 is an introduction to computer programming class so we do not assume any physics background for the students.</strong></p>

<p>Create a Java class called <code class="language-plaintext highlighter-rouge">NBody</code> with an empty <code class="language-plaintext highlighter-rouge">main()</code> function. Give your file a class header.</p>

<p>You should see many image files and solarsystem.txt on the left in Codio. Reach out to course staff if you don’t.</p>

<p>If you need to download the original files again, you can find them <a href="hw02_base/hw02_base.zip">here</a>.</p>

<h3 id="e-advice">E. Advice</h3>

<ul>
  <li>Compile, run, and debug frequently; make one small change at a time, ensuring that your program works as you expect it to after each change.</li>
  <li>Be certain to debug and test your program as you go. Even if you have not yet gotten to steps with graphical output, you can test your program easily by adding in temporary <code class="language-plaintext highlighter-rouge">System.out.println()</code> statements. For instance, if you read in a variable, print its value to check that the value of the variable is the value you expect. If you do a computation, print out the result and check it. Once you’re certain the variable is correct, you should remove these temporary <code class="language-plaintext highlighter-rouge">System.out.println()</code> statements.
    <ul>
      <li>If you are not getting the outputs you expect, print out the value of variables at different points in the program (i.e. before a loop, inside the body of a loop, and/or after the loop)</li>
      <li>Comment out these statements before you submit</li>
    </ul>
  </li>
  <li>Keep your code organized by using indentation and avoiding too many blank lines.</li>
  <li>Comment frequently (this helps you and others understand the code) and use descriptive variable names.</li>
  <li>Examine debugging errors in the console for clues as to what went wrong.</li>
</ul>

<h3 id="f-physics-background">F. Physics Background</h3>

<p><strong>Here is a <a href="https://drive.google.com/file/d/1k7Xrq2HEg4T86Fa8-GI3gftMWLt4wx7J/view">video explaining the physics background</a> for this assignment. One of our former TAs (alumnus) was kind enough to create this brief video that runs through the basics of the assignment.</strong></p>

<p>At each “timestep” (a value you will be given which represents the duration of a single step of the simulation), you will draw all bodies in their proper location which will be determined by the given displacement equations. Then, for each pair of bodies A and B, you will find the gravitational force that B exerts on A based on their respective masses and the distance between them using Newton’s Law of Gravitation (given). Since there is a force acting on A, Newton’s Second Law of Motion predicts that A will accelerate (i.e., its velocity will change). You will then compute A’s new velocity. After finding the new velocities of all of the bodies, you will compute their new positions, which will be displayed on the simulation (redrawn once per timestep).</p>

<h2 id="1-command-line-arguments">1. Command Line Arguments</h2>

<h3 id="a-refresher-using-command-line-arguments">A. Refresher: Using command-line arguments</h3>

<p>Study the following program.</p>

<p>A Java program can take arguments when it is executed from the command-line in the terminal. These arguments are passed to the <code class="language-plaintext highlighter-rouge">main()</code> function as an array of strings called <code class="language-plaintext highlighter-rouge">args</code>; thus, the first command-line argument is <code class="language-plaintext highlighter-rouge">args[0]</code>, the second is <code class="language-plaintext highlighter-rouge">args[1]</code>, and so on.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CommandLineArguments</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Double</span><span class="o">.</span><span class="na">parseDouble</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">1</span><span class="o">]));</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">args</span><span class="o">[</span><span class="mi">2</span><span class="o">]));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Compile this program (you may cut and paste it into Codio) and run it by clicking Run on the toolbar. What happens?</p>

<p>In the Terminal window that opened when you compiled, enter these commands as the prompt:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Max 2.0 3</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Max</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Max 2.0 3 Michael</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Sierra Rachel 3</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Michael 2 3</code></li>
  <li><code class="language-plaintext highlighter-rouge">java CommandLineArguments Sierra 2 3.0</code></li>
</ul>

<p>Make sure you understand each line of code, and why you get the output and runtime errors that you do for each set of command-line arguments.</p>

<h3 id="b-setting-up-command-line-arguments">B. Setting up command-line arguments</h3>

<p>Your <code class="language-plaintext highlighter-rouge">NBody</code> program will take three command-line arguments: [in this order]</p>

<ul>
  <li>A double, <code class="language-plaintext highlighter-rouge">simulationTime</code>, that represents the time at which the simulation should end (total time of the simulation)</li>
  <li>A double, <code class="language-plaintext highlighter-rouge">timeStep</code>, that represents the time quantum (the rate at which the simulation proceeds)</li>
  <li>A string, <code class="language-plaintext highlighter-rouge">filename</code>, which is the name of the file containing the universe information (the bodies in the universe and each body’s unique features)</li>
</ul>

<p>Declare these variables and initialize their values to the first, second, and third command-line arguments given to your program, respectively. You will use these variables later in your <code class="language-plaintext highlighter-rouge">NBody</code> program.</p>

<h3 id="c-checkpoint">C. Checkpoint</h3>

<p>Compile <code class="language-plaintext highlighter-rouge">NBody</code>, and run it with the arguments 15778000.0, 25000.0,  (simulationTime, timeStep) and <code class="language-plaintext highlighter-rouge">solarSystem.txt</code>. Since you are passing in command-line arguments, you must run the program from the terminal (see the command-line arguments refresher) rather than simply clicking “Run”.  Your program should not crash. If it does, use <code class="language-plaintext highlighter-rouge">System.out.println()</code> to identify the bug in your code. <strong>Any debugging code that you add should be commented out when you submit.</strong></p>

<h2 id="2-reading-from-a-file">2. Reading from a File</h2>

<p>The specifications (universe information) for the simulation are provided in a text file that provides the list of all bodies, their masses, initial positions, image file names, etc. By storing the universe information in a separate file, we can use a general reader in our program that can load different universe information (depending on the text file used) to simulate a variety of scenarios (different universe files and all images are provided in the zip file you downloaded).</p>

<h3 id="a-input-file-format">A. Input file format</h3>

<p>The text files containing universe information are provided in the following format.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5        numBodies 
2.50e+11 radius 
5.97400e+24  1.49600e+11  0.00000e+00  0.00000e+00  2.98000e+04    earth.gif
6.41900e+23  2.27900e+11  0.00000e+00  0.00000e+00  2.41000e+04     mars.gif
3.30200e+23  5.79000e+10  0.00000e+00  0.00000e+00  4.79000e+04  mercury.gif
1.98900e+30  0.00000e+00  0.00000e+00  0.00000e+00  0.00000e+00      sun.gif
4.86900e+24  1.08200e+11  0.00000e+00  0.00000e+00  3.50000e+04    venus.gif
m[]          px[]         py[]         vx[]         vy[]             img[]
</code></pre></div></div>

<p>In this file,</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">numBodies</code> is the number of bodies in the simulation</li>
  <li><code class="language-plaintext highlighter-rouge">radius</code> is the <strong>radius</strong> of the universe; your simulation will assume that all bodies will have x- and y-coordinates between <code class="language-plaintext highlighter-rouge">-radius</code> and <code class="language-plaintext highlighter-rouge">radius</code></li>
  <li>There will be <code class="language-plaintext highlighter-rouge">numBodies</code> rows remaining in the file, each containing six values (columns):
    <ul>
      <li><code class="language-plaintext highlighter-rouge">m[]</code> is the mass of the body in kilograms (m)</li>
      <li><code class="language-plaintext highlighter-rouge">px[]</code> and <code class="language-plaintext highlighter-rouge">py[]</code> are the initial x- and y-coordinates of the body in meters ($p_x$, $p_y$)</li>
      <li><code class="language-plaintext highlighter-rouge">vx[]</code> and <code class="language-plaintext highlighter-rouge">vy[]</code> are the initial x- and y-components of the body velocity in meters per second ($v_x$, $v_y$)</li>
      <li><code class="language-plaintext highlighter-rouge">img[]</code> is the filename of the image file used to represent the body in the simulation</li>
    </ul>
  </li>
</ul>

<h3 id="b-setting-up-a-file-reader">B. Setting up a File Reader</h3>

<p>The standard library provides the class  <code class="language-plaintext highlighter-rouge">In.java</code> to support accessing information from a file. Study <code class="language-plaintext highlighter-rouge">StudentsFileProcessor.java</code>, which is provided in Codio. This file provides an example of reading information from a file. Compile <code class="language-plaintext highlighter-rouge">StudentsFileProcessor.java</code>, and run it from the Codio terminal with the argument <code class="language-plaintext highlighter-rouge">students.txt</code>:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java StudentsFileProcessor students.txt
</code></pre></div></div>

<p>In your <code class="language-plaintext highlighter-rouge">NBody</code> class, declare and initialize a variable, <code class="language-plaintext highlighter-rouge">inStream</code>, as below:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>In inStream = new In(filename); // creates a variable inStream of type In to read from the file
</code></pre></div></div>

<p>inStream is just a variable name. Technically, you could name this variable anything, but for convenience we are giving you the name “inStream” for your file reader variable.</p>

<h3 id="c-reading-values-from-the-file">C. Reading values from the file</h3>

<p>Now that <code class="language-plaintext highlighter-rouge">inStream</code> is initialized, you can access/read information from it using the following function calls. These functions behave identically to those in <code class="language-plaintext highlighter-rouge">StdIn</code>. Below, you will see that each value read from the file (accessed via inStream) is immediately stored in a variable (i.e. b, i, d, s).</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">();</span>     <span class="c1">// boolean value that is true if there are no more values, false otherwise</span>
<span class="kt">int</span>     <span class="n">i</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>     <span class="c1">// reads in an int from inStream</span>
<span class="kt">double</span>  <span class="n">d</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readDouble</span><span class="o">();</span>  <span class="c1">// reads in a double from inStream</span>
<span class="kt">boolean</span> <span class="n">b</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readBoolean</span><span class="o">();</span> <span class="c1">// reads in a boolean from inStream</span>
<span class="nc">String</span>  <span class="n">s</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readString</span><span class="o">();</span>  <span class="c1">// reads in a string from inStream</span>
<span class="nc">String</span>  <span class="n">s</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>    <span class="c1">// reads in an entire line from inStream</span>
<span class="nc">String</span>  <span class="n">s</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readAll</span><span class="o">();</span>     <span class="c1">// reads in the entire file from inStream</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">inStream</code> will start reading from the beginning of the file (top left). Each time a function like <code class="language-plaintext highlighter-rouge">readDouble()</code> is called, <code class="language-plaintext highlighter-rouge">inStream</code> attempts to read the next (unread) number as a double (an error will occur if it cannot be parsed to a double). The next time a read function is called, <code class="language-plaintext highlighter-rouge">inStream</code> moves to the next item in the file.</p>

<p>For example, say that a file, <code class="language-plaintext highlighter-rouge">sample.txt</code>, is as follows:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>4 5
</code></pre></div></div>

<p>The code snippet</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">In</span> <span class="n">inStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">In</span><span class="o">(</span><span class="s">"sample.txt"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
<span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="n">inStream</span><span class="o">.</span><span class="na">readDouble</span><span class="o">();</span>
</code></pre></div></div>

<p>will set variable <code class="language-plaintext highlighter-rouge">x</code> to 4 and variable <code class="language-plaintext highlighter-rouge">y</code> to 5.0.</p>

<p>In your <code class="language-plaintext highlighter-rouge">NBody</code> program, declare an integer variable <code class="language-plaintext highlighter-rouge">numBodies</code> and a double variable <code class="language-plaintext highlighter-rouge">radius</code>. Using the above functions, initialize  <code class="language-plaintext highlighter-rouge">numBodies</code> and <code class="language-plaintext highlighter-rouge">radius</code> to the first and second values in the file, respectively.</p>

<h3 id="d-reading-arrays-from-the-file">D. Reading arrays from the file</h3>

<p>Declare five double arrays <code class="language-plaintext highlighter-rouge">m</code>, <code class="language-plaintext highlighter-rouge">px</code>, <code class="language-plaintext highlighter-rouge">py</code>, <code class="language-plaintext highlighter-rouge">vx</code>, and <code class="language-plaintext highlighter-rouge">vy</code>, and a String array <code class="language-plaintext highlighter-rouge">img</code>, and initialize them to length <code class="language-plaintext highlighter-rouge">numBodies</code>. Use the <code class="language-plaintext highlighter-rouge">inStream</code> functions and a loop to read all of the values in the file and store them in the appropriate array, at the appropriate index. The file will be read from left to right and will automatically go to the next line when there are no more values in a row. Think of how you can use a loop and order your function calls to read the file and store values efficiently (it is not complicated and the code within the loop need not exceed 8 lines).</p>

<h3 id="e-checkpoint">E. Checkpoint</h3>

<p>Copy the code below and paste it at the end of your <code class="language-plaintext highlighter-rouge">main()</code> function. This code will print out the contents of your six arrays and make it easy to see if you’ve stored the file values correctly.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%d\n"</span><span class="o">,</span> <span class="n">numBodies</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%.2e\n"</span><span class="o">,</span> <span class="n">radius</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numBodies</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%12.5e %12.5e %12.5e %12.5e %12.5e %12s\n"</span><span class="o">,</span> <span class="n">m</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">px</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">py</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">vx</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">vy</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">img</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Compile your program and run it with the same command-line arguments: 15778000.0, 25000.0, and <code class="language-plaintext highlighter-rouge">solarSystem.txt</code>. Note that by pressing <code class="language-plaintext highlighter-rouge">↑</code> (up arrow) you can recall commands previously typed into the terminal. When you run your file now, the output from the terminal should exactly match the text in the file <code class="language-plaintext highlighter-rouge">solarSystem.txt</code>. If your program crashes or if the output is different, use <code class="language-plaintext highlighter-rouge">System.out.println()</code>statements to identify and fix the bug.</p>

<h2 id="3-drawing">3. Drawing</h2>

<h3 id="a-drawing-the-background">A. Drawing the background</h3>

<p>Use</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">PennDraw</span><span class="o">.</span><span class="na">setXscale</span><span class="o">(-</span><span class="n">radius</span><span class="o">,</span> <span class="n">radius</span><span class="o">);</span>
<span class="nc">PennDraw</span><span class="o">.</span><span class="na">setYscale</span><span class="o">(-</span><span class="n">radius</span><span class="o">,</span> <span class="n">radius</span><span class="o">);</span>
</code></pre></div></div>

<p>to set the coordinates of the simulation window.</p>

<p>Use <code class="language-plaintext highlighter-rouge">PennDraw.picture()</code> function to draw the image <code class="language-plaintext highlighter-rouge">starfield.jpg</code> (provided in the zip file) in the center of the window.</p>

<h3 id="b-drawing-bodies">B. Drawing bodies</h3>

<p>Write a loop that draws each particle in the correct position, on top of the background image. The position of the ith particle is (<code class="language-plaintext highlighter-rouge">px[i]</code>, <code class="language-plaintext highlighter-rouge">py[i]</code>), and the image to be used is <code class="language-plaintext highlighter-rouge">img[i]</code>.</p>

<h3 id="c-checkpoint-1">C. Checkpoint</h3>

<p>Compile and run your program now using the same command-line arguments: 15778000.0, 25000.0, and <code class="language-plaintext highlighter-rouge">solarSystem.txt</code>. You should now see five bodies drawn (the Sun, Mercury, Venus, Earth, and Mars) in a line, stationary, on a starfield background image.</p>

<h2 id="4-particle-movement">4. Particle Movement</h2>
<p>The motion of particles is governed by a set of equations known as Newton’s Laws of Motion and Gravitation. (At the scale of the galaxy, we can treat planets as particles.) The equations contain two basic parts: <strong>velocity</strong>, which is the speed and direction that a particle is moving in, and <strong>acceleration</strong>, which is the change in speed and direction. Particles always move in a straight line at a constant speed unless some outside force (e.g. friction, gravity, or a push) accelerates it. In our simulation, the only force is gravity. However, we will FIRST implement a simpler universe without gravity and test to make sure that it works.</p>

<p>Although we think of time as advancing continuously and of objects as moving continuously, computers are not good at simulating constant change. Instead, we settle for letting time jump forward in discrete time steps of Δt (<code class="language-plaintext highlighter-rouge">timeStep</code>, which your program already reads as the second command-line argument). This variable is called the <strong>time quantum</strong> and is measured in seconds. Particles will simply jump from the old position to the new position at each time step. By setting timeStep to a very small value, we can get an accurate simulation, but the number of computations will be large. Setting timeStep to a very large number will speed up the simulation, but it will not be very accurate (it will be difficult to see a clear pattern of movement).</p>

<h3 id="a-the-time-loop">A. The time loop</h3>

<p>First declare a variable that represents the total elapsed time of your simulation (elapsedTime will equal timeStep multiplied by the number of times the loop has run). Add a loop (“the time loop”) around the code you’ve written to draw the background and bodies at their initial positions. The elapsed time increases by <code class="language-plaintext highlighter-rouge">timeStep</code> once per iteration of the loop, and the simulation continues as long as the elapsed time is less than <code class="language-plaintext highlighter-rouge">simulationTime</code>. <strong>The previous information indicates how to set up the conditions of your loop.</strong></p>

<p><strong>Before</strong> the time loop, add a call to the PennDraw function, enableAnimation (<code class="language-plaintext highlighter-rouge">PennDraw.enableAnimation(30))</code> which will enable animation at 30fps (frames per second). <code class="language-plaintext highlighter-rouge">enableAnimation()</code> will make the simulation proceed in a visually smooth manner between each iteration of the time loop. You may adjust the frame rate as you see fit. (decrease the frame rate a lot to see how the particles are moving from frame to frame; increase it to get to the end of the simulation faster).</p>

<p>Within your time loop, add a call to <code class="language-plaintext highlighter-rouge">PennDraw.advance()</code> <em>after</em> drawing all the bodies. This is necessary for the PennDraw animation to work.</p>

<p><strong>After</strong> the time loop, add the given code from <strong>Checkpoint 2E</strong>.</p>

<p>The time loop is where the simulation is created. Thus, any code which pertains to the simulation should be placed in the time loop.</p>

<h3 id="b-updating-body-positions">B. Updating body positions</h3>

<p>Inside the time loop, before redrawing the particles, change the position of each of the bodies. First think about updating variables; re-drawing will come later. For the original values of position: ($p_x$, $p_y$) the resultant values (the new $p_x$ and $p_y$) should be calculated with the following equations:</p>

<p><strong>$p_{x_{new}} = p_x + \Delta t * v_x$</strong></p>

<p><strong>$p_{y_{new}} = p_y + \Delta t * v_y$</strong></p>

<p><strong>($\Delta t$ represents the timeStep)</strong></p>

<h3 id="c-checkpoint-2">C. Checkpoint</h3>

<p>Compile and run your program with the same arguments from the previous checkpoints. You should now see an unmoving Sun the center of the window, and the four planets moving straight up and off the screen. The planets do this because the initial velocities given  in <code class="language-plaintext highlighter-rouge">solarSystem.txt</code> all point straight up (remember, velocities consist of a magnitude AND direction), and we have not yet incorporated the acceleration.</p>

<p>If the animation flickers or smears, check that you are drawing the background <strong>exactly once</strong> per iteration of the time loop.</p>

<h3 id="d-updating-velocities">D. Updating velocities</h3>

<p><img src="images/updating_velocities.png" alt="img" /></p>

<p><strong>Image Legend</strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center"><strong>Variable</strong></th>
      <th style="text-align: center"><strong>Explanation</strong></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">$p_x$</td>
      <td style="text-align: center">Position of body A (earth) on x axis</td>
    </tr>
    <tr>
      <td style="text-align: center">$p_y$</td>
      <td style="text-align: center">Position of body A on y axis</td>
    </tr>
    <tr>
      <td style="text-align: center">$p_x’$</td>
      <td style="text-align: center">Position of body B (sun) on x axis</td>
    </tr>
    <tr>
      <td style="text-align: center">$p_y’$</td>
      <td style="text-align: center">Position of body B on y axis</td>
    </tr>
    <tr>
      <td style="text-align: center">$\Delta x$</td>
      <td style="text-align: center">Difference between x positions of bodies A (earth) and B (sun)</td>
    </tr>
    <tr>
      <td style="text-align: center">$\Delta y$</td>
      <td style="text-align: center">Difference between y positions of bodies A (earth) and B (sun)</td>
    </tr>
    <tr>
      <td style="text-align: center">$d$</td>
      <td style="text-align: center">Distance between bodies A and B</td>
    </tr>
  </tbody>
</table>

<hr />
<p><strong>Note:</strong> Do not worry about the cos and sin equations. They are not needed in this assignment. To calculate the x and y components of the total force, use the right-most expressions.</p>

<p><strong>Structure Overview</strong>
Now that we are updating the velocities, we will have to add nested loops (<strong>2 additional loops</strong>) within the time loop. Using two nested loops allows us to efficiently calculate how each body affects all of the other bodies. Each loop will traverse through all of the bodies, and calculations will be performed to determine how the velocity should change based on one body’s interaction with all of the other bodies. Below is a summary of the calculations you should perform and where they should be placed (in the outer loop, outside the inner loop or within the inner loop). Note that you may have lines of code from previous parts which need to be moved around after the addition of the nested for loop structure.</p>

<p><strong>Calculation Overview</strong>
Keep in mind that all calculations - force, acceleration, velocity, and position - should be calculated separately for the x and y directions. In order to update the x and y velocity of body A (and eventually every other body), we first have to calculate the total force exerted on body A by all of the other bodies in the universe. After the total force in the x and y directions is computed, we can calculate the acceleration (x and y). Given the accelerations, we calculate the x and y velocities, and finally we compute the updated positions ($p_x$ and $p_y$). We already set up the position updates in part B. We suggest that you start by declaring variables for each calculation you see in the image. Consider where these variables should be declared in relation to the inner and outer loops (this should become clearer after reading the below instructions).</p>

<p><em>Your variable names should respect the <strong>camelCase</strong> naming conventions of Java variables rather than the conventional symbols used in physics.</em></p>

<p><strong>Outer loop</strong> – For every body, A (represented by the Earth in the image above), you must compute the forces exerted on it by every other body B (represented in the image above by the Sun). This outer loop will use the net force on body A ($F_x$ and $F_y$) to calculate the acceleration ($a_x$ and $a_y$) of A and update its velocity ($v_x$ and $v_y$) based on this acceleration. See the above image for the equations to calculate $F_x$ and $F_y$.</p>

<p><strong>Inner loop</strong> – The net force exerted on body A should be the sum of the forces exerted on it by each <strong>other</strong> body B. Declare variables to store the x- and y-components of the force exerted by body B on A. Hint: Each iteration of the inner loop should increase the net force Fx and Fy on body A by the force exerted by body B on A in the x and y direction, respectively. As an example, let’s say this is the first iteration of the outer loop and body A is the first body in the universe. When the inner loop completes numBodies iterations, the values of Fx and Fy should equal the net force exerted on body A by all of the other bodies in the universe.</p>

<p><strong>$\Delta x$ and $\Delta y$</strong> – Be careful computing $\Delta x$ and $\Delta y$. These are the distances in the x- and y-directions between two bodies, and can be negative. You should <strong>not</strong> take the absolute value of the differences between their x- and y-positions.</p>

<p><strong>Gravity</strong> – Define a variable <code class="language-plaintext highlighter-rouge">G = 6.67e-11</code> for the gravitational constant so the equations will be easier to read. By doing so, we maintain better style by avoiding putting <code class="language-plaintext highlighter-rouge">6.67e-11</code> in many places in our code. When calculating the force between bodies A and B, use the following order of operations to avoid NaN values: $((G * m_A) / (d * d)) * m_B$</p>

<p><strong>Acceleration</strong> – By Newton’s Second Law, for each body, the x and y acceleration of that body are $a_x = \frac{f_x}{m}$ and $a_y = \frac{f_y}{m}$. Compute the x- and y-components of the particle’s acceleration using these equations once you’ve calculated the component forces.</p>

<p><strong>Velocity</strong> – Using the acceleration you just computed, calculate the velocity ($v_x$, $v_y$) using the expressions: $v_x = v_x + (\Delta t * a_x)$ and $v_y = v_y + (\Delta t * a_y)$. This gives you the new direction and speed of each body.</p>

<p><strong>Order of computation</strong> – It is imperative to update the velocity of <strong>every</strong> body before updating any positions. Even though your program computes these velocities one after the other, you have to maintain the <strong>illusion</strong> that all planets are moving at the same time. For instance, if you update the Earth’s position before computing Mars’ velocity, then you will end up computing Mars’ velocity based on Earth’s <strong>future</strong> position, rather than its current position.</p>

<h3 id="e-common-problems">E. Common Problems</h3>

<p><strong>Anti-Gravity</strong> – If you flip the order of your bodies when you compute Δx and Δy, your bodies will repel rather than attract one another. For the <code class="language-plaintext highlighter-rouge">solarSystem.txt</code> example, you might end up with something that looks like this:</p>

<p><a href="http://www.youtube.com/watch?v=Bi6scfHWLu4" title="anti_gravity.png"><img src="http://img.youtube.com/vi/Bi6scfHWLu4/0.jpg" alt="" /></a></p>

<p><strong>Planets jump to the upper-left corner</strong> – Check your nested loop where you compute the forces exerted on each planet. Are you computing the force exerted by a body on itself (e.g. Earth’s gravitational pull on itself)? If you are, do the computation by hand to see exactly what it would give you. That should help you understand why this is a bad idea, and why the planets jump the way they do. (Video is slowed for illustration.)</p>

<p><a href="http://www.youtube.com/watch?v=j73bytX-dzo" title="upper_left.png"><img src="http://img.youtube.com/vi/j73bytX-dzo/0.jpg" alt="" /></a></p>

<p><strong>Planets go around the sun, then zoom off the lower left corner</strong> – You are not summing up the forces correctly. Run your program with a small value of <code class="language-plaintext highlighter-rouge">simulationTime</code> (e.g. 51000) so it runs for only two or three time steps. Print out the value of every variable before and after you change its value (or right after you first initialize it). Include enough information in the print statement so you can tell which variable you are printing out. Make sure to print all loop variables as well so you can tell from the output exactly when (at which iteration) each print statement occurred. Run the program, and examine the output. Ask yourself each time a variable changes whether its starting and new values make sense. (You don’t need to work out the exact values of the variables to figure out if they make sense in this case.) Once you’ve found the problem, you may want to move the declarations of some variables farther inside your loops to the first point you need them. Declaring variables as late as possible is one strategy to avoid the type of bug you are encountering. (Video is slowed for illustration.)</p>

<p><a href="http://www.youtube.com/watch?v=i26ur1cJRjU" title="lower_left.png"><img src="http://img.youtube.com/vi/i26ur1cJRjU/0.jpg" alt="" /></a></p>

<p><strong>Planets are flickering</strong> – You are either not calling <code class="language-plaintext highlighter-rouge">PennDraw.advance()</code> at all, or calling it after drawing each body instead of once, after drawing all bodies. This means each planet appears to move as soon as you draw it, instead of all the planets appearing to move in sync.</p>

<p><strong>Planets are flickering, and only one shows at a time</strong> – You are redrawing the background before drawing each planet, instead of redrawing it once per timestep. As a result, you keep covering up each planet as soon as you draw it.</p>

<p><strong>Planets “smear” across the screen</strong> – You are drawing the background once at the beginning of the programming instead of once each time step. <code class="language-plaintext highlighter-rouge">PennDraw</code> does not erase the window automatically. In this program, we’re never erasing it at all. Instead, we keep covering the old planet positions up with the starfield image, which happens to be exactly the same size as the window. If you don’t keep redrawing the background before drawing the planets at their new positions, the old planets are still there, causing the smearing effect.</p>

<h3 id="f-checkpoint">F. Checkpoint</h3>

<p>Compile and run your program. The bodies should now orbit the Sun, and at the end of the simulation, your program should print the final state of the system in the terminal.</p>

<p>The following are the values you should obtain for the final state of the system with various <code class="language-plaintext highlighter-rouge">simulationTime</code> and <code class="language-plaintext highlighter-rouge">timeStep</code> values. When testing, you should start with a single time step, making sure that it is working completely. Then try a small number of time steps, again making certain that it is working completely, before going on to a full year. It is much easier to diagnose problems for smaller time frames.</p>

<p><code class="language-plaintext highlighter-rouge">java NBody 25000.0 25000.0 solarSystem.txt</code> (one step)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
2.50e+11
5.97400e+24  1.49596e+11  7.45000e+08 -1.48201e+02  2.98000e+04    earth.gif
6.41900e+23  2.27898e+11  6.02500e+08 -6.38597e+01  2.41000e+04     mars.gif
3.30200e+23  5.78753e+10  1.19750e+09 -9.89331e+02  4.79000e+04  mercury.gif
1.98900e+30  3.30867e+01  0.00000e+00  1.32347e-03  0.00000e+00      sun.gif
4.86900e+24  1.08193e+11  8.75000e+08 -2.83294e+02  3.50000e+04    venus.gif
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">java NBody 50000.0 25000.0 solarSystem.txt</code> (two steps)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
2.50e+11
5.97400e+24  1.49589e+11  1.48998e+09 -2.96404e+02  2.97993e+04    earth.gif
6.41900e+23  2.27895e+11  1.20500e+09 -1.27720e+02  2.40998e+04     mars.gif
3.30200e+23  5.78258e+10  2.39449e+09 -1.97887e+03  4.78795e+04  mercury.gif
1.98900e+30  9.92618e+01  2.81978e-01  2.64700e-03  1.12791e-05      sun.gif
4.86900e+24  1.08179e+11  1.74994e+09 -5.66597e+02  3.49977e+04    venus.gif
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">java NBody 75000.0 25000.0 solarSystem.txt</code> (three steps)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
2.50e+11
5.97400e+24  1.49578e+11  2.23493e+09 -4.44605e+02  2.97978e+04    earth.gif
6.41900e+23  2.27890e+11  1.80748e+09 -1.91579e+02  2.40995e+04     mars.gif
3.30200e+23  5.77516e+10  3.59045e+09 -2.96820e+03  4.78386e+04  mercury.gif
1.98900e+30  1.98523e+02  1.12801e+00  3.97047e-03  3.38411e-05      sun.gif
4.86900e+24  1.08158e+11  2.62477e+09 -8.49891e+02  3.49931e+04    venus.gif
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">java NBody 31557600.0 25000.0 solarSystem.txt</code> (one year)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>5
2.50e+11
5.97400e+24  1.49594e+11 -1.65312e+09  3.29492e+02  2.97978e+04    earth.gif
6.41900e+23 -2.21530e+11 -4.92633e+10  5.18050e+03 -2.36404e+04     mars.gif
3.30200e+23  3.47713e+10  4.57516e+10 -3.82694e+04  2.94146e+04  mercury.gif
1.98900e+30  5.94260e+05  6.23570e+06 -5.85686e-02  1.62847e-01      sun.gif
4.86900e+24 -7.37309e+10 -7.93909e+10  2.54335e+04 -2.39734e+04    venus.gif
</code></pre></div></div>

<p>You should also test your program against some of the other universes (different text files) that we provided. Ensure that your program does not misbehave when given more or fewer than five bodies.</p>

<!-- 
### G. Music

This task is not for credit; it is just for fun. (Depending on the individual configuration of your personal computer, this may not work correctly.) Add the following line somewhere before your time loop:


```java
StdAudio.play("2001.mid");
```


Run your program again, and let us know in the readme whether you have sound. The music is the fanfare to Also sprach Zarathustra by Richard Strauss; it was popularized as the key musical motif in Stanley Kubrick’s 1968 film 2001: A Space Odyssey. -->

<h2 id="5-extra-credit-and-enrichment">5. Extra Credit and Enrichment</h2>

<h3 id="a-extra-credit">A. Extra credit</h3>

<p>Submit a .zip file called <code class="language-plaintext highlighter-rouge">extra.zip</code> containing an alternate universe (in the same format as the provided universe text files) along with the necessary image files. If its behavior is sufficiently interesting, we’ll award extra credit. Your submission must be in a zip file, even if there are no images, so that our grading scripts can handle it correctly.</p>

<h3 id="b-technical-details-on-the-simulation">B. Technical details on the simulation</h3>

<p>This simulation method is called the leapfrog finite difference approximation scheme; it is based on a numeric integration of Newton’s equations, and is the basis for most astrophysical simulations of gravitational systems.</p>

<p>The leapfrog method is more stable for integrating Hamiltonian systems than conventional numerical methods like Euler’s method or Runge-Kutta. The leapfrog method is symplectic, which means it preserves properties specific to Hamiltonian systems (conservation of linear and angular momentum, time-reversibility, and conservation of energy of the discrete Hamiltonian). In contrast, ordinary numerical methods become dissipative and exhibit qualitatively different long-term behavior. For example, the Earth would slowly spiral into (or away from) the Sun. For these reasons, symplectic methods are extremely popular for N-body calculations in practice.</p>

<p>Here’s a more complete explanation of how you should interpret the variables. The classic Euler method updates the position uses the velocity at time <code class="language-plaintext highlighter-rouge">t</code> instead of using the updated velocity at time <code class="language-plaintext highlighter-rouge">t + Δt</code>. A better idea is to use the velocity at the midpoint, <code class="language-plaintext highlighter-rouge">t + Δt / 2</code>. The leapfrog method does this in a clever way. It maintains the position and velocity one-half time step out of phase: at the beginning of an iteration, (<code class="language-plaintext highlighter-rouge">px</code>, <code class="language-plaintext highlighter-rouge">py</code>) represents the position at time <code class="language-plaintext highlighter-rouge">t</code> whilst (<code class="language-plaintext highlighter-rouge">vx</code>, <code class="language-plaintext highlighter-rouge">vy</code>) represents the velocity at time <code class="language-plaintext highlighter-rouge">t - Δt / 2</code>. Interpreting the position and velocity in this way, the updated position (<code class="language-plaintext highlighter-rouge">px + Δt vx</code>, <code class="language-plaintext highlighter-rouge">py + Δt vy</code>) uses the velocity at time <code class="language-plaintext highlighter-rouge">t + Δt / 2</code>. Almost magically, the only special care needed to deal with the half time-steps is to initialize the system’s velocity at time <code class="language-plaintext highlighter-rouge">t = Δt / 2</code> (instead of t = 0.0), and you can assume that we have already done this for you in <code class="language-plaintext highlighter-rouge">solarSystem.txt</code>. Note also that the acceleration is computed at time t so that when we update the velocity, we are using the acceleration at the midpoint of the interval under consideration.</p>

<h2 id="6-readme-and-submission">6. Readme and Submission</h2>

<h3 id="a-readme">A. Readme</h3>

<p>Complete <code>readme_nbody.txt</code> in the same way that you have done for previous assignments.</p>

<h3 id="b-submission">B. Submission</h3>

<p>Submit <code class="language-plaintext highlighter-rouge">NBody.java</code> and <code class="language-plaintext highlighter-rouge">readme_nbody.txt</code> on Gradescope. If you completed the extra credit, also submit <code class="language-plaintext highlighter-rouge">extra.zip</code>.</p>

<p>Your code will be tested for compilation and checkstyle errors upon submission. <!--In addition, we will execute your NBody program with 10 different sets of command line arguments and compare your program's output to a reference implementation of NBody (similar to section 4F).--></p>

<!--The autograder will give you a score out of 10 with 1 point awarded per test passed.-->
<p>Please note that the autograder does not reflect your grade for this assignment.<!-- this is simply a tool we've provided to check the correctness of your implementation.--></p>

<!--Failed tests will display your output and the correct reference output to help you debug. The title of each test states the command line arguments used for that test. -->

<p><em>Important:</em> Please make sure the code snippet from section 2E appears verbatim at the very end of the main() function. Also make sure that it is not in a loop and that there are <em>no other print statements</em> anywhere else in your code. The code is copied below for your convenience:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%d\n"</span><span class="o">,</span> <span class="n">numBodies</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%.2e\n"</span><span class="o">,</span> <span class="n">radius</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">numBodies</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%12.5e %12.5e %12.5e %12.5e %12.5e %12s\n"</span><span class="o">,</span> <span class="n">m</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">px</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">py</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">vx</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">vy</span><span class="o">[</span><span class="n">i</span><span class="o">],</span> <span class="n">img</span><span class="o">[</span><span class="n">i</span><span class="o">]);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>If you encounter any autograder-related issues, please make a private post on Piazza.</p>

<!-- Docs to Markdown version 1.0β17 -->

    
  </div>

  <footer class="text-center text-muted">
    <hr>
    
    
    <br>
  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      $("#nbody").addClass("active");
      
    });
  </script>
</body>

</html>