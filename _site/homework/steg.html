<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140907291-3"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-140907291-3');
  </script>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CIS 110 Fall 2020 — Introduction to Computer Programming</title>

  <!-- Mathjax -->
  <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
  <script type="text/javascript" charset="utf-8"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
  <script type="text/javascript" charset="utf-8" src="https://vincenttam.github.io/javascripts/MathJaxLocal.js">
  </script>

  <link rel="apple-touch-icon" sizes="180x180" href="/~cis110/current/assets/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/~cis110/current/assets/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/~cis110/current/assets/favicon/favicon-16x16.png">
  <link rel="manifest" href="/~cis110/current/assets/favicon/site.webmanifest">
  <link rel="mask-icon" href="/~cis110/current/assets/favicon/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/~cis110/current/assets/favicon/favicon.ico">
  <meta name="apple-mobile-web-app-title" content="CIS 110">
  <meta name="application-name" content="CIS 110">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-config" content="/~cis110/current/assets/favicon/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- CSS -->
  <link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">

  <link href="/~cis110/current/assets/css/style.css" rel="stylesheet">
  <link href="/~cis110/current/assets/css/syntax.css" rel="stylesheet">

  <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>

<body>
  <a class="sr-only" href="#content">Skip to main content</a>

  <!-- Docs master nav -->
  <header class="navbar navbar-static-top navbar-default" role="banner">
    <div class="container">
      <div class="row">
        <div class="navbar-header">
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <ul class="nav navbar-nav">
            <div class="hidden-sm hidden-xs">
              <li id="main-page"><a href="/~cis110/current/index.html" class="navbar-brand">CIS 110 - Introduction to
                  Computer Programming</a></li>
            </div>
            <div class="visible-sm visible-xs">
              <li id="main-page"><a href="/~cis110/current/index.html" class="navbar-brand">CIS 110</a></li>
            </div>
          </ul>
        </div>
        <!-- DO NOT edit this file directly. If you are editing the header, edit navigation.yaml or homework.yaml. -->
<nav class="collapse navbar-collapse" role="navigation">
    <ul class="nav navbar-nav">
        <li id="Homework">
    <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/homework.html">Homework
    <span class="caret"></span></a>
    <ol class="dropdown-menu">
        <li>
            <a href="/~cis110/current/homework/homework.html">Homework Table</a>
        </li>
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
        
    </ol>
</li>
        
        
        
        <li id="Syllabus"><a href="/~cis110/current/syllabus.html">Syllabus</a></li>
        
        
        
        <li id="Staff"><a href="/~cis110/current/staff.html">Staff</a></li>
        
        
        
        <li id="Office Hours"><a href="/~cis110/current/schedule.html">Office Hours</a></li>
        
        
        
        <li id="Grade Calculator"><a href="/~cis110/current/grade_calc.html">Grade Calculator</a></li>
        
        
        
        <li id="SRS"><a href="/~cis110/current/sunday_review_sessions.html">SRS</a></li>
        
        
        
        <li id="Policies">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Policies
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/policies/grading_policies.html">Grading</a></li>
                
                <li><a href="/~cis110/current/policies/attendance_fa20.html">Attendance</a></li>
                
                <li><a href="/~cis110/current/policies/homework_policies.html">Homework</a></li>
                
                <li><a href="/~cis110/current/policies/collaboration_policies.html">Collaboration</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Exams">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Exams
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/exams/exam_procedures.html">Exam Procedures</a></li>
                
                <li><a href="/~cis110/current/exams/exam1.html">Exam 1</a></li>
                
                <li><a href="/~cis110/current/exams/exam2.html">Exam 2</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Resources">
            <a class="dropdown-toggle" data-toggle="dropdown" href="/~cis110/current/">Resources
                <span class="caret"></span></a>
            <ol class="dropdown-menu">
                
                <li><a href="/~cis110/current/resources/getting_help.html">Getting Help</a></li>
                
                <li><a href="/~cis110/current/resources/javadocs.html">CIS 110 Javadocs</a></li>
                
                <li><a href="/~cis110/current/resources/topics_guide.html">Topic Glossary</a></li>
                
                <li><a href="/~cis110/current/resources/runtime_errors.html">Runtime Errors Walkthrough</a></li>
                
                <li><a href="/~cis110/current/resources/compiler_errors.html">Compilation Errors Walkthrough</a></li>
                
                <li><a href="/~cis110/current/resources/style.html">Style Guide</a></li>
                
                <li><a href="/~cis110/current/resources/penndraw.html">PennDraw.java</a></li>
                
                <li><a href="/~cis110/current/resources/in.html">In.java</a></li>
                
                <li><a href="/~cis110/current/resources/software_setup.html">Software Setup</a></li>
                
                <li><a href="/~cis110/current/resources/accommodations.html">Accommodations</a></li>
                
            </ol>
        </li>
        
        
        
        <li id="Wellness"><a href="/~cis110/current/wellness.html">Wellness</a></li>
        
        
    </ul>
</nav>
      </div>
    </div>
  </header>

  <div class="container">
    
    <h3 id="0-getting-started">0. Getting Started</h3>

<hr />

<h3 id="a-goals">A. Goals</h3>

<hr />

<p>The purpose of this assignment is to gain practice with object-oriented programming, bitwise operators, number systems, and cryptography. The specific goals are to:</p>
<ul>
  <li>Continue to familiarize yourself with objects in Java.</li>
  <li>Understand the differences between static libraries and non-static objects.</li>
  <li>Implement practical examples of bits and bitwise functions.</li>
  <li>Get a glimpse into the world of modern cryptography.
At the end of the assignment, you will be able to encrypt and decrypt text using a pseudo-random number stream, and reveal messages hidden into images.</li>
</ul>

<hr />

<h3 id="b-background">B. Background</h3>

<hr />

<p>Encryption is the process of encoding messages or information that can only be decoded by people with authorization (usually some sort of key). Good encryption algorithms produce output that looks random to a bystander but is easily decipherable with the correct key.</p>

<p>In Hail, Caesar!, the key was a single character which shifted all characters in the message up the alphabet. This algorithm was far from perfect, and you demonstrated this by writing a function to crack the cipher without having authorization. This exploited the fact that the outputted cipher wasn’t entirely random – some letters appeared an abnormal amount, and this allowed you to find the offset key.</p>

<p>Over the two millennia since Julius Caesar, cryptography has gone a long way. Computers have played an enormous role in developing information communications as well as keeping those communications safe. In this assignment, you will implement and use a <code class="language-plaintext highlighter-rouge">linear feedback shift register (LFSR)</code> to create a stream of pseudo-random bits. This will help you create a significantly more random cipher.</p>

<p>Once you have written a crypto library, with the necessary functions, you will use it for a practical application: steganography — the practice of hiding secret messages in images in plain sight.</p>

<hr />

<h3 id="c-understand-the-problem">C. Understand the Problem</h3>

<hr />

<p>First you will write an LFSR object. Once given a “seed”, it produces a boundless stream of seemingly random bits (1s and 0s). The key feature is that given the same seed, the LFSR will produce the <strong>same stream of bits</strong>. This means that if Alice and Bob both know the same seed, they can produce identical random bit streams.</p>

<p>To encrypt the message, you will perform an <strong>exclusive or</strong> (^) operation between each bit in the message and the LFSR’s sequence of pseudo-random bits. The resulting cipher, after you perform the XOR operations  will appear to be nonsense, like <code class="language-plaintext highlighter-rouge">Kao y{u(x kp }1rkz~|g2rjf@r)</code>, but when it is XORed again with the same sequence of pseudo-random bits as the first time, the encrypted message can be decrypted into the original message.</p>

<p>Since an LFSR’s bit stream is completely determined by its given parameters, Alice can produce the same bit stream that Bob used to encrypt a cipher if she knows the seed, and so can decrypt the message through the same process. For this reason, an LFSR encryption scheme is a symmetric key encryption technique (the alternative is an asymmetric scheme, in which different passwords are used for encrypting and decrypting).</p>

<hr />

<h3 id="d-designing-the-requirements-and-interface">D. Designing the Requirements and Interface</h3>

<hr />

<p>All of the extra files (image data and readme) you need will be in codio when you start the assignment, and you can download them <a href="hw08_base/base.zip">here</a> as well. You will be writing the following two classes from scratch. Their APIs are listed below, but each will be elaborated on in later sections of the homework. You <strong>must include all of the functions</strong> listed below in the class under which they are listed.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LFSR</span>
<span class="o">-----------------</span>
<span class="kd">public</span> <span class="nf">LFSR</span><span class="o">(</span><span class="nc">String</span> <span class="n">seed</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">);</span>
<span class="kd">public</span> <span class="nf">LFSR</span><span class="o">(</span><span class="kt">int</span> <span class="n">seedLength</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">);</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">();</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getTapPosition</span><span class="o">();</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">nextBit</span><span class="o">();</span>


<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Codec</span>
<span class="o">------------------</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">encode</span><span class="o">(</span><span class="nc">String</span> <span class="n">str</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">decode</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">bits</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">encrypt</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">message</span><span class="o">,</span> <span class="nc">String</span> <span class="n">seed</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">);</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">decrypt</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">cipher</span><span class="o">,</span> <span class="nc">String</span> <span class="n">seed</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">);</span>
</code></pre></div></div>

<p>In any class, you may add additional functions and/or instance variables you like, but they <strong>must be private</strong>. A public main for testing is fine, but no additional public functions or instance variables may be added.</p>

<hr />

<h3 id="1-number-systems">1. Number Systems</h3>

<hr />

<h3 id="a-binary">A. Binary</h3>
<p>Before we move onto writing code, it may be helpful to review number systems. You have been dealing with numbers your entire life - 10, 12, 100, 1, 50001. Something that is often missed in this numerical notation is the base of this number system, which is 10. For example 1210 = 1 * 10<sup>3</sup> + 2 * 10<sup>2</sup> + 1 * 10<sup>1</sup> + 0 * 10<sup>0</sup>. Likewise 5030110 = 5 * 10<sup>6</sup> + 0 * 10<sup>5</sup> + 3 * 10<sup>4</sup> + 0 * 10<sup>3</sup> + 1 * 10<sup>2</sup> + 1 * 10<sup>1</sup> + 0 * 10<sup>0</sup>. This is inherent to us, we have ten toes and ten fingers. However, computers only understand 1s and 0s (it has to do with electric signals). Hence, we must be able to communicate all data to a computer in 1s and 0s.</p>

<p>The binary number system represents numbers in base 2 and deals with powers of 2. For example, 3<sub>10</sub> = 1 * 2<sup>1</sup> + 1 * 2<sup>0</sup> = 11<sub>2</sub>. Likewise 50<sub>10</sub> = 1 * 2<sup>5</sup> + 1 * 2<sup>4</sup> + 0 * 2<sup>3</sup> + 0 * 2<sup>2</sup> + 1 * 2<sup>1</sup> + 0 * 2<sup>0</sup> = 110010<sub>2</sub>. In this way we can translate numbers from the binary system to decimal and vice-versa.</p>

<p><img src="images/binary_conversion.png" alt="binary to decimal" /></p>

<p>The diagram above illustrates an easy way to convert from decimal to binary. Here we use long division as a manner of conversion. In the diagram shown below, take a look at the two examples on the right. Either of these examples can be divided into four diagonals (follow the diagonal from upper left to bottom right) of numbers.</p>

<p>Consider the rightmost example below. The uppermost diagonal is the divisor which will always be 2. The second diagonal (43, 21, 10…..) is the diagonal of dividends/quotients and the bottom most diagonal (1, 1, 0…..) is the diagonal of remainders. The way we proceed is - we divide 43 by 2 which gives 21 as the quotient and 1 as the remainder. 21 then becomes the new dividend and we divide it by 2 to get 10 as the quotient and 1 as the remainder. Progressing in this manner, we end up with 1 as the dividend which we divide by 2 to get 0 as the quotient and 1 as the remainder. We now take the remainders in the opposite direction (from the last remainder back up to the first) to get our binary number which is 101011<sub>2</sub> (for the decimal number 43<sub>10</sub>).</p>

<p><img src="images/diagonal_conversion.png" alt="diagonal conversion" /></p>

<hr />

<h3 id="2-lfsr">2. LFSR</h3>

<hr />

<h3 id="a-understanding-the-problem">A. Understanding the Problem</h3>

<hr />

<p>In the first part of this assignment, you will be creating a linear feedback shift register (LFSR). An LFSR is a structure that can produce a stream of pseudo-random bits, which has many practical uses, particularly in cryptography.</p>

<p>The LFSR consists of a <strong>register</strong> of bits and a <strong>tap position</strong>. The register is simply a list of bits that has a fixed size (which should suggest to you a good data structure to implement the LFSR). The <strong>tap position</strong> is simply an index in the register of bits that will be used to create the pseudo-random bits later. When we create an LFSR, we must seed it by providing the initial values in the register.</p>

<p><strong>There are two steps in producing a pseudo-random bit with a given LFSR:</strong></p>
<ol>
  <li>Shift all bits by one place towards the most significant bit/MSB (the leftmost bit in the diagram).</li>
  <li>Then, replace the least significant bit/LSB (the rightmost bit) with the exclusive or of the most significant bit that was shifted off of the register and the bit previously in the tap position.</li>
</ol>

<p>The new least significant bit (rightmost in the diagram) will be the pseudo-random bit produced by the LFSR.</p>

<p>Consider the example below. The following figure shows an LFSR seeded with the initial seed <code class="language-plaintext highlighter-rouge">01101000010</code> and tap position <code class="language-plaintext highlighter-rouge">8</code> during the process of producing one pseudo-random bit. Keep in mind that <strong>the tap position is counted from the rightmost (least significant) bit!</strong> This is opposite from the way positions are counted in arrays and strings, but is consistent with the way bit/digit positions are counted in numbers. The first step mentioned above, shifting all the bits one place towards the MSB is designated by the grey arrows separating the two arrays. The second step mentioned above, XORing two bits and replacing the LSB with that result, is shown via the blue-highlighted boxes.</p>

<p><img src="images/LFSR.png" alt="LFSR" /></p>

<p><strong>NOTE THAT THE ARRAY INDICES ARE FROM 10 (left) to 0 (right). This is opposite from how most arrays are diagrammed.</strong></p>

<hr />

<h3 id="b-shift-register-implementation">B. Shift Register Implementation</h3>

<hr />

<p>Before you begin writing your <code class="language-plaintext highlighter-rouge">LFSR.java</code> class, you will want to decide how you want to represent the register of bits within your class. We are leaving this decision up to you, and any working implementation will be accepted. Here are our suggestions:</p>
<ul>
  <li>an <code class="language-plaintext highlighter-rouge">int[]</code> containing only 1s and 0s</li>
  <li>a <code class="language-plaintext highlighter-rouge">char[]</code> containing only ‘1’s and ‘0’s</li>
  <li>a <code class="language-plaintext highlighter-rouge">boolean[]</code> containing only true and false</li>
  <li>a single <code class="language-plaintext highlighter-rouge">int</code>, where each bit represents a position in the shift register. This is a more challenging implementation, but will give you a chance to play around with and understand bits and binary better. In this case, your shift register will be limited to 32 bits, and you will need to use the bitwise operators <code class="language-plaintext highlighter-rouge">&amp;</code> (bitwise AND), <code class="language-plaintext highlighter-rouge">|</code> (bitwise OR), <code class="language-plaintext highlighter-rouge">&lt;&lt;</code> (shift left), and <code class="language-plaintext highlighter-rouge">&gt;&gt;</code> (shift right).</li>
</ul>

<hr />

<h3 id="c-constructor-and-methods">C. Constructor and Methods</h3>

<hr />

<p>Your LFSR class will implement the API described below. This section will provide the details for the constructor and methods:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">LFSR</span> 
<span class="o">-----------------</span>
<span class="kd">public</span>        <span class="nf">LFSR</span><span class="o">(</span><span class="nc">String</span> <span class="n">seed</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">)</span>     <span class="c1">// constructor</span>
<span class="kd">public</span>        <span class="nf">LFSR</span><span class="o">(</span><span class="kt">int</span> <span class="n">seedLength</span><span class="o">,</span> <span class="kt">int</span> <span class="n">tapPosition</span><span class="o">)</span>  <span class="c1">// constructor for a random seed</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">toString</span><span class="o">()</span>                             <span class="c1">// string representation of the LFSR</span>
<span class="kd">public</span> <span class="kt">int</span>    <span class="nf">getTapPosition</span><span class="o">()</span>                       <span class="c1">// return the tap position</span>
<span class="kd">public</span> <span class="kt">int</span>    <span class="nf">nextBit</span><span class="o">()</span>                              <span class="c1">// return a random bit and update the LFSR</span>
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">public LFSR(String seed, int tapPosition)</code> takes a <code class="language-plaintext highlighter-rouge">String</code> parameter <code class="language-plaintext highlighter-rouge">seed</code> whose characters are a sequence of <code class="language-plaintext highlighter-rouge">0</code>s and <code class="language-plaintext highlighter-rouge">1</code>s, and an <code class="language-plaintext highlighter-rouge">int</code> parameter <code class="language-plaintext highlighter-rouge">tapPosition</code> specifying which position in the register to use as the tap. The constructor should throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with a useful error message if <code class="language-plaintext highlighter-rouge">seed</code> contains any characters other than <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>, if <code class="language-plaintext highlighter-rouge">tapPosition</code> refers to an impossible position in the register (for example, <code class="language-plaintext highlighter-rouge">-1</code>), or if <code class="language-plaintext highlighter-rouge">seed</code> is <code class="language-plaintext highlighter-rouge">null</code>.</p>

<p><strong>Note</strong>: remember the <code class="language-plaintext highlighter-rouge">String.charAt()</code> method, which will be helpful when parsing through <code class="language-plaintext highlighter-rouge">seed</code>.</p>

<p><code class="language-plaintext highlighter-rouge">public LFSR(int seedLength, int tapPosition)</code> takes an <code class="language-plaintext highlighter-rouge">int</code> parameter <code class="language-plaintext highlighter-rouge">seedLength</code>, and generates a random seed (i.e. a random string of <code class="language-plaintext highlighter-rouge">0</code>s and <code class="language-plaintext highlighter-rouge">1</code>s of length <code class="language-plaintext highlighter-rouge">seedLength</code>.</p>

<p>The constructor should throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with a useful error message if <code class="language-plaintext highlighter-rouge">seedLength</code> is not positive or if <code class="language-plaintext highlighter-rouge">tapPosition</code> refers to an impossible position in the register.</p>

<p><code class="language-plaintext highlighter-rouge">public String toString()</code> returns the current bit sequence in the shift register as a <code class="language-plaintext highlighter-rouge">String</code> of <code class="language-plaintext highlighter-rouge">1</code>s and <code class="language-plaintext highlighter-rouge">0</code>s. For example, the code below should print <code class="language-plaintext highlighter-rouge">101011</code>. This method will help you when debugging.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">LFSR</span> <span class="n">lfsr</span> <span class="o">=</span> <span class="k">new</span> <span class="no">LFSR</span><span class="o">(</span><span class="s">"101011"</span><span class="o">,</span> <span class="mi">3</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lfsr</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
</code></pre></div></div>
<p><strong>Note</strong>: Make sure your <code class="language-plaintext highlighter-rouge">toString()</code> method works! If it doesn’t, all of our automated tests will fail and you will lose lots and lots of points.</p>

<p><code class="language-plaintext highlighter-rouge">public int getTapPosition()</code> returns the tap position, as given by the constructor.</p>

<p><code class="language-plaintext highlighter-rouge">public int nextBit()</code> performs one step of the LFSR, as described in section 2A and returns the least significant bit (the rightmost bit) in the shift register <strong>after the step has been performed</strong> as an <code class="language-plaintext highlighter-rouge">int</code> with the value <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>.</p>

<p>For testing, you should ensure you can run</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">LFSR</span> <span class="n">lfsr</span> <span class="o">=</span> <span class="k">new</span> <span class="no">LFSR</span><span class="o">(</span><span class="s">"01101000010"</span><span class="o">,</span> <span class="mi">8</span><span class="o">);</span>
<span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">bit</span> <span class="o">=</span> <span class="n">lfsr</span><span class="o">.</span><span class="na">nextBit</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">lfsr</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span> <span class="o">+</span> <span class="n">bit</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>
<p>which should print</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="mi">11010000101</span> <span class="mi">1</span> 
<span class="mi">10100001011</span> <span class="mi">1</span>
<span class="mo">01000010110</span> <span class="mi">0</span> 
<span class="mi">10000101100</span> <span class="mi">0</span> 
<span class="mo">00001011001</span> <span class="mi">1</span>
<span class="mo">00010110010</span> <span class="mi">0</span> 
<span class="mo">00101100100</span> <span class="mi">0</span> 
<span class="mo">01011001001</span> <span class="mi">1</span>
<span class="mi">10110010010</span> <span class="mi">0</span> 
<span class="mo">01100100100</span> <span class="mi">0</span>
</code></pre></div></div>

<p><strong>Before moving on</strong>, you should have tested <strong>all</strong> methods in <code class="language-plaintext highlighter-rouge">LFSR.java</code> and be confident that it is correctly implemented.</p>

<hr />

<h3 id="3-codec-library">3. Codec Library</h3>

<hr />

<h3 id="a-ascii-conversion">A. ASCII Conversion</h3>

<hr />

<p>Before we can begin encrypting and decrypting using our LFSR, we need to implement two functions to encode and decode our messages into ASCII. For instance, the string SENDMONEY maps to the following sequence of ASCII codes:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span> <span class="mi">83</span><span class="o">,</span> <span class="mi">69</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">68</span><span class="o">,</span> <span class="mi">77</span><span class="o">,</span> <span class="mi">79</span><span class="o">,</span> <span class="mi">78</span><span class="o">,</span> <span class="mi">69</span><span class="o">,</span> <span class="mi">89</span> <span class="o">}</span>
</code></pre></div></div>

<p>Remember that you can convert characters in a <code class="language-plaintext highlighter-rouge">String</code> to their ASCII codes quite easily: use the <code class="language-plaintext highlighter-rouge">charAt()</code> method to extract a single character, and cast the result to an <code class="language-plaintext highlighter-rouge">int</code>. (Technically, you’re getting the character’s Unicode code, but the first 128 characters in the Unicode character set match the ASCII character set exactly.)</p>

<p>Since you will encrypt messages bit-by-bit, not character-by-character, you will need to expand each ASCII code into 7 1s and 0s that correspond to the code’s binary representation. (By the time ASCII became the universal standard for encoding characters on computers, most computers used 8-bit bytes. However the communication lines to keyboards, printers, screens, and other computers tended to be very unreliable. To help detect transmission errors, the ASCII standard only uses 7 bits to encode a character and leaves the 8th bit free for error-checking purposes.)</p>

<hr />

<h3 id="b-helper-functions">B. Helper Functions</h3>

<hr />

<p>To help implement your Codec library, begin by creating two helper functions. Remember, helper functions should be private!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">charToIntArray</span><span class="o">(</span><span class="kt">char</span> <span class="n">ch</span><span class="o">)</span>
<span class="kd">private</span> <span class="kd">static</span> <span class="kt">char</span> <span class="nf">intArrayToChar</span><span class="o">(</span><span class="kt">int</span><span class="o">[]</span> <span class="n">bitString</span><span class="o">)</span> 
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">private static int[] charToIntArray(char ch)</code> takes in a <code class="language-plaintext highlighter-rouge">character</code> and converts it to a binary representation of its ASCII value. Specifically, it will return an <code class="language-plaintext highlighter-rouge">int[]</code> where each element is a single bit (i.e. 1 or 0) in the ASCII encoding of the character <code class="language-plaintext highlighter-rouge">ch</code> using 7 bits.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">charToIntArray('C')</code> should output the array <code class="language-plaintext highlighter-rouge">{ 1, 0, 0, 0, 0, 1, 1 }</code> because ‘C’ has an ASCII value of 67 and 67 in binary is 1000011.</p>

<p><strong>Hint</strong>: first focus on getting the ASCII representation of the <code class="language-plaintext highlighter-rouge">char</code> as an int (in decimal) and then work out how to find the 7 bits that represent that int. You can do this using standard arithmetic operations or bit-level operators. It’s exactly the same process we covered in lecture and recitation for converting decimal numbers to binary or hex.</p>

<p><code class="language-plaintext highlighter-rouge">private static char intArrayToChar(int[] bitString)</code> does the opposite of <code class="language-plaintext highlighter-rouge">charToIntArray(char ch)</code>. It takes in an <code class="language-plaintext highlighter-rouge">int[]</code> of length 7 where each element is a single bit (i.e. 1 or 0) in the ASCII encoding of a character <code class="language-plaintext highlighter-rouge">ch</code> and outputs the character that is encoded.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">intArrayToChar({ 1, 0, 0, 0, 0, 1, 1 })</code> should output the character <code class="language-plaintext highlighter-rouge">'C'</code>.</p>

<p>Make sure you extensively test both helper functions <strong>before</strong> moving on. You should test each function individually as well as together (i.e. make sure that they perform the inverse operation of each other).</p>

<hr />

<h3 id="c-encode-and-decode">C. Encode and Decode</h3>

<hr />

<p>For your <code class="language-plaintext highlighter-rouge">Codec.java</code> library, begin by writing two functions, making use of the helper functions you created in the previous section.</p>

<p><code class="language-plaintext highlighter-rouge">public static int[] encode(String str)</code> takes in a <code class="language-plaintext highlighter-rouge">String</code> and will return an <code class="language-plaintext highlighter-rouge">int[]</code> where each element is a single bit in the ASCII encoding of the <code class="language-plaintext highlighter-rouge">String</code>. Each character in <code class="language-plaintext highlighter-rouge">str</code> will encode into 7 bits, so the output array should be 7 times larger than <code class="language-plaintext highlighter-rouge">str.length()</code>.</p>

<p>For example, <code class="language-plaintext highlighter-rouge">encode("C")</code> should output the array <code class="language-plaintext highlighter-rouge">{ 1, 0, 0, 0, 0, 1, 1 }</code></p>

<ul>
  <li>If <code class="language-plaintext highlighter-rouge">str</code> is <code class="language-plaintext highlighter-rouge">null</code>, <code class="language-plaintext highlighter-rouge">encode()</code> should return <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li>If any character in <code class="language-plaintext highlighter-rouge">str</code> has a unicode value &gt;127 (i.e. the character is not part of the ASCII subset of Unicode), your program should throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
</ul>

<p><strong>Hint</strong>: Use the helper functions written above to help with this.</p>

<p>You should <strong>test</strong> <code class="language-plaintext highlighter-rouge">encode()</code> and be confident before you move on to the next function.</p>

<p><code class="language-plaintext highlighter-rouge">public static String decode(int[] bits)</code> will accept an array of <code class="language-plaintext highlighter-rouge">int</code>s representing a message in ASCII, and will return the decoded <code class="language-plaintext highlighter-rouge">String</code>. This is simply a reversal of the <code class="language-plaintext highlighter-rouge">encode()</code> process. Remember, every 7 bits corresponds to one <code class="language-plaintext highlighter-rouge">char</code>.</p>
<ul>
  <li>If <code class="language-plaintext highlighter-rouge">bits</code> is <code class="language-plaintext highlighter-rouge">null</code>, return <code class="language-plaintext highlighter-rouge">null</code>.</li>
  <li>If <code class="language-plaintext highlighter-rouge">bits.length</code> is not a multiple of 7, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
  <li>If <code class="language-plaintext highlighter-rouge">bits</code> contains any values other than 0 and 1, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
</ul>

<p>Once you have written <code class="language-plaintext highlighter-rouge">encode()</code> and <code class="language-plaintext highlighter-rouge">decode()</code>, you should be able to encode any <code class="language-plaintext highlighter-rouge">String</code> into binary and decode it back into the original string.</p>

<hr />

<h3 id="d-encrypt-and-decrypt">D. Encrypt and Decrypt</h3>

<hr />

<p>Your next task is to write functions to encrypt and decrypt messages by xor-ing them with a sequence of pseudo-random bits generated by the LFSR. The “password” is the set of parameters that define the LFSR (the seed and tap position).</p>

<p>For instance, consider the letter “C” with binary representation <code class="language-plaintext highlighter-rouge">1000011</code>. Say we construct an LFSR with <code class="language-plaintext highlighter-rouge">01101000010</code> as the seed and <code class="language-plaintext highlighter-rouge">8</code> as the tap. This will produce a bit stream of <code class="language-plaintext highlighter-rouge">1100100100</code>.</p>

<p><strong>Note</strong>: The bit stream is not the changed register - it is the compiled string of pseudo-random bits that come from continually calling nextBit() many times on our register. You should use the output of nextBit() as your bit stream.</p>

<p>Encrypting the letter “C” (67 in ASCII, which is represented in binary as 1000011) with this LFSR would be done by:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">message</span> <span class="n">bits</span>   <span class="mi">1000011</span>
<span class="n">random</span>  <span class="n">bits</span>   <span class="mi">1100100</span>
<span class="o">----------------------</span>
<span class="n">encrypted</span> <span class="n">bits</span> <span class="mo">0100111</span>
</code></pre></div></div>

<p>Note that the ith bit in the cipher is the XOR of the ith bit in the message and the ith bit in the random bit stream.</p>

<p>Write <code class="language-plaintext highlighter-rouge">public static void encrypt(int[] message, String seed, int tapPosition)</code> to perform this encryption. <code class="language-plaintext highlighter-rouge">message</code> is the message in binary to encrypt, and <code class="language-plaintext highlighter-rouge">seed</code> and <code class="language-plaintext highlighter-rouge">tapPosition</code> are the parameters for the LFSR to be used when encrypting. You <strong>should not be returning anything</strong>. Instead, you should be changing the <code class="language-plaintext highlighter-rouge">message</code> array <strong>in place</strong>. Implement the following error checks, in order:</p>
<ol>
  <li>If the seed is <code class="language-plaintext highlighter-rouge">null</code>, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
  <li>If the tap position is impossible, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
  <li>If the seed contains any characters other than <code class="language-plaintext highlighter-rouge">'0'</code> and <code class="language-plaintext highlighter-rouge">'1'</code>, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
  <li>If the message is <code class="language-plaintext highlighter-rouge">null</code>, do nothing.</li>
  <li>If the message length is not a multiple of 7, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
  <li>If any entry in the message array contains a value other than <code class="language-plaintext highlighter-rouge">0</code> or <code class="language-plaintext highlighter-rouge">1</code>, throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
</ol>

<p>Once you have tested and are confident in <code class="language-plaintext highlighter-rouge">encrypt()</code> you should write <code class="language-plaintext highlighter-rouge">public static void decrypt(int[] cipher, String seed, int tapPosition)</code>. This function should be <strong>one line long</strong>.</p>

<p><strong>Hint</strong>: Exclusive or is symmetric. In practice, this means that if <code class="language-plaintext highlighter-rouge">c == r ^ m</code> then <code class="language-plaintext highlighter-rouge">m == r ^ c</code>.</p>

<hr />

<h3 id="4-image-steganography">4. Image Steganography</h3>

<hr />

<h3 id="a-understanding-the-problem-1">A. Understanding the Problem</h3>

<hr />

<p>Now that you have written a more modern encryption library, you will use it for a practical application: steganography. Image steganography is the science of hiding secret messages inside of images. Think of it as 21st century disappearing ink. The casual observer simply sees an ordinary image; only someone who knows how to look for it will notice or find the message.</p>

<p>Image steganography has many practical uses, particularly for digital watermarking, where a message is hidden so that the image source can be tracked or verified. The FBI has even alleged that Russian intelligence services have used steganography to communicate with agents abroad.</p>

<p>You will implement a simple, but very effective form of image steganography. The idea is to fiddle with each pixel’s color in a way that isn’t perceivable to the human eye, but that the computer can interpret. Since the human eye is least sensitive to blue wavelengths, we’ll slightly adjust the amount of blue in each pixel in a way that encodes a single bit of information.</p>

<p>As far as the computer is concerned, an image is just a 2-D array of pixels. The color of each pixel is an integer between 0 and 16.8 million (2<sup>24</sup> - 1 to be precise), with 8 bits dedicated to each of the red, green, and blue primaries.</p>

<p><img src="images/pixels.png" alt="image colors" /></p>

<p>Flipping the ones bit of this number (i.e. subtracting 1 from an odd number or adding 1 to an even number) changes the amount of blue in the color by a minute amount that is indistinguishable to the human eye. These two blues are <code class="language-plaintext highlighter-rouge">001001011000010110101110</code> and <code class="language-plaintext highlighter-rouge">001001011000010110101111</code>.</p>

<p><img src="images/blues.png" alt="blues" /></p>

<p>Using your <code class="language-plaintext highlighter-rouge">Codec.java</code> library, you will be decoding a message hidden inside of an image.</p>

<hr />

<h3 id="b-imagedatajava">B. <code class="language-plaintext highlighter-rouge">ImageData.java</code></h3>

<hr />

<p>We have provided you with the <code class="language-plaintext highlighter-rouge">ImageData.java</code> library for reading and writing images as 2D integer arrays. <code class="language-plaintext highlighter-rouge">ImageData.java</code> provides three functions:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[][]</span> <span class="nf">load</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span>              <span class="c1">// load image filename and return it as a 2-D array of integers</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">show</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">img</span><span class="o">)</span>                     <span class="c1">// display img in a window</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">save</span><span class="o">(</span><span class="kt">int</span><span class="o">[][]</span> <span class="n">img</span><span class="o">,</span> <span class="nc">String</span> <span class="n">filename</span><span class="o">)</span>    <span class="c1">// save img to filename</span>
</code></pre></div></div>

<p>Each element in the 2D integer array corresponds to one pixel in the image. Refer to section 3A to see how each pixel is represented as an <code class="language-plaintext highlighter-rouge">int</code>.</p>

<hr />

<h3 id="c-retrieve-message">C. Retrieve Message</h3>

<hr />

<p>You should see <code class="language-plaintext highlighter-rouge">RetrieveMessage.java</code> in your Codio, and you can also download it here. This loads the specified image, extracts the embedded cipher, and prints out the decrypted message. This file has been completed for you and you do not need to change anything. .</p>

<p><code class="language-plaintext highlighter-rouge">RetrieveMessage.java</code> takes three command line arguments:</p>
<ul>
  <li>the name of the image file (jpg or png format)</li>
  <li>the seed for the LFSR as a string of <code class="language-plaintext highlighter-rouge">0</code>s and <code class="language-plaintext highlighter-rouge">1</code>s</li>
  <li>the tap position for the LFSR</li>
</ul>

<p>If the image has an embedded message that is not encrypted, you only need to pass in the image name and can ignore the second two command line arguments.</p>

<p>In order to test your code with <code class="language-plaintext highlighter-rouge">RetrieveMessage.java</code>, we have provided <code class="language-plaintext highlighter-rouge">stegosaur_embedded.png</code> which has a hidden message which is <strong>not encrypted</strong>. We also have <code class="language-plaintext highlighter-rouge">stegosaur_encrypted.png</code> which contains the same hidden message, but this time encrypted with the seed <code class="language-plaintext highlighter-rouge">01101000010</code> and tap <code class="language-plaintext highlighter-rouge">8</code>. You should be able to use <code class="language-plaintext highlighter-rouge">RetrieveMessage.java</code> to retrieve the messages from both of these images at this point, if you’ve completed the previous parts of the assignment correctly.</p>

<hr />

<h3 id="d-hide-message">D. Hide Message</h3>

<hr />

<p>For the final part of the assignment, you are given <code class="language-plaintext highlighter-rouge">HideMessage.java</code>, and you can also download it here. This encodes a message into binary, encrypts the message using an LFSR, and hides the message in the least significant bits of an image. the new image will be saved as <code class="language-plaintext highlighter-rouge">filename_hidden.png</code>. You do not need to change anything in this file.</p>

<p><code class="language-plaintext highlighter-rouge">HideMessage.java</code> takes in four command-line arguments:</p>
<ul>
  <li>the name of the image file (png format only - jpg will not work)</li>
  <li>the name of the text file containing your message (Note: you create this file yourself)</li>
  <li>the seed for the LFSR as a string of <code class="language-plaintext highlighter-rouge">0</code>s and <code class="language-plaintext highlighter-rouge">1</code>s</li>
  <li>the tap position for the LFSR</li>
</ul>

<p><strong>Notes</strong>:</p>
<ul>
  <li>If you want to embed the message but not encrypt it, do not give the <code class="language-plaintext highlighter-rouge">seed</code> or <code class="language-plaintext highlighter-rouge">tapPosition</code> command line arguments.</li>
  <li>If the message is too long for the image, it will throw an <code class="language-plaintext highlighter-rouge">IllegalArgumentException</code> with an appropriate error message.</li>
</ul>

<p>At this point, you should be able to run <code class="language-plaintext highlighter-rouge">HideMessage.java</code> and then retrieve the message from the saved image using <code class="language-plaintext highlighter-rouge">RetrieveMessage.java</code>.</p>

<hr />

<h3 id="5-readme-and-submission">5. README and Submission</h3>

<hr />

<h3 id="a-readme">A. README</h3>

<hr />

<p>Complete <code class="language-plaintext highlighter-rouge">readme_steg.txt</code> in the same way you have done for previous assignments.</p>

<hr />

<h3 id="b-submission">B. Submission</h3>

<hr />

<p>Submit <code class="language-plaintext highlighter-rouge">LFSR.java</code>, <code class="language-plaintext highlighter-rouge">Codec.java</code>, and <code class="language-plaintext highlighter-rouge">readme_steg.txt</code> on Gradescope.</p>

<p><strong>Before submission, comment out any print statements that were used for debugging or testing your functions and not any print statements that we asked you to insert.</strong></p>

<p><strong>Be sure that every method has an appropriate header comment, and that your code is well-documented.</strong></p>

    
  </div>

  <footer class="text-center text-muted">
    <hr>
    
    
    <br>
  </footer>

  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      $("#steg").addClass("active");
      
    });
  </script>
</body>

</html>